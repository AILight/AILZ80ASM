	ORG	$9000

ADDR:
	REGTEST HL
	REGTEST ADDR
	ABC(DEF)
	TEST_MACRO

; レジスター指定テスト
MACRO REGTEST target
#IF target.@Text != "HL"
    ld hl, target
#ELSE
	NOP
#ENDIF
END MACRO

; カッコつきマクロテスト
MACRO ABC(DEF)
	XOR A
END MACRO

; マクロ内リピート
TEST_MACRO MACRO

	; 実行アドレスを整える
	REPT	($ + 15) / 16 * 16 - $
	nop
	ld a, 0
	nop
	ENDM

ENDM
